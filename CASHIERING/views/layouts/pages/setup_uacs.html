{% extends 'views/layouts/pages/admin_main.html' %}
{% block title %}<title>CMS | Setup UACS</title>{% endblock %}
{% load static %}
{% block page-css %}
<link href="{%static 'assets/plugins/DataTables/media/css/dataTables.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/Buttons/css/buttons.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/Responsive/css/responsive.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/AutoFill/css/autoFill.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/ColReorder/css/colReorder.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/KeyTable/css/keyTable.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/RowReorder/css/rowReorder.bootstrap.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/DataTables/extensions/Select/css/select.bootstrap.min.css' %}" rel="stylesheet" />
<!--  -->
<link href="{%static 'assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/ionRangeSlider/css/ion.rangeSlider.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/ionRangeSlider/css/ion.rangeSlider.skinNice.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/password-indicator/css/password-indicator.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-combobox/css/bootstrap-combobox.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-select/bootstrap-select.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/jquery-tag-it/css/jquery.tagit.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-daterangepicker/daterangepicker.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/select2/dist/css/select2.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-eonasdan-datetimepicker/build/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/bootstrap-colorpalette/css/bootstrap-colorpalette.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/jquery-simplecolorpicker/jquery.simplecolorpicker.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/jquery-simplecolorpicker/jquery.simplecolorpicker-fontawesome.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/jquery-simplecolorpicker/jquery.simplecolorpicker-glyphicons.css' %}" rel="stylesheet" />
<link href="{%static 'assets/plugins/lightbox/css/lightbox.css' %}" rel="stylesheet" />
<style type="text/css" media="print">
    /* @page { size: landscape; } */
    .hidden-print { display: none; }
    .col-3-4-w { 
        max-width: 100px; 
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
</style>
<style>
    div.dropdown-menu.open{
        max-height: 314px !important;
        overflow: hidden;
    }
    ul.dropdown-menu.inner{
        max-height: 260px !important;
        overflow-y: auto;
    }
</style>
{% endblock %}
{% block content %}6
<!-- begin #content -->
<div id="content" class="content">
    <!-- begin breadcrumb -->
    <ol class="breadcrumb pull-right">
        <li class="breadcrumb-item"><a href="javascript:;">Home</a></li>
        <li class="breadcrumb-item"><a href="javascript:;">System Configuration</a></li>
        <li class="breadcrumb-item active">Setup UACS</li>
    </ol>
    <!-- end breadcrumb -->
    <!-- begin page-header -->
    <h1 class="page-header">Setup UACS <small>Unified Accounts Code Structure</small></h1>
    <!-- end page-header -->
    
    <!-- begin row -->
    <div class="row">
        <!-- begin col-6 -->
        <div class="col-lg-4">
            <!-- begin panel -->
            <div class="panel panel-default">
                <!-- begin panel-heading -->
                <div class="panel-heading">
                    <h4 class="panel-title"><i class="fas fa-plus-square m-r-5"></i>Add | Define UACS</h4>
                </div>
                <!-- end panel-heading -->
                <!-- begin panel-body -->
                <div class="panel-body">
                    <form class="form-horizontal" name="demo-form" id="add-uacs-form" autocomplete="off">
                        <div class="form-group row m-b-15">
                            <label class="col-md-4 col-sm-4 col-form-label" for="fndtype">Fund Type <span class="text-red">*</span> :</label>
                            <div class="col-md-8 col-sm-8">
                                <select class="form-control selectpicker1" name="fndtype" id="fndtype" data-style="btn-white">
                                    <option selected disabled class="text-grey-darker optdummy1" style="display: block;">Select Fund Type</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row m-b-15">
                            <label class="col-md-4 col-sm-4 col-form-label" for="inctype">Income Type <span class="text-red">*</span> :</label>
                            <div class="col-md-8 col-sm-8">
                                <select class="form-control selectpicker2" name="inctype" id="inctype" data-style="btn-white">
                                    <option selected disabled class="text-grey-darker optdummy2" style="display: block;">Select Income Type</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row m-b-15">
                            <label class="col-md-4 col-sm-4 col-form-label" for="code">Old Code :</label>
                            <div class="col-md-6 col-sm-6">
                                <input class="form-control" type="text" id="o_code" name="o_code" placeholder="Old Code" />
                            </div>
                            <div class="col-md-2 col-sm-2 m-t-15" style="margin-left: -10px;">
                                <input class="m-r-5" type="checkbox" id="o_check" name="o_check" title="Click if old code is not applicable"/><small>N/A</small>
                            </div>
                        </div>
                        <div class="form-group row m-b-15">
                            <label class="col-md-4 col-sm-4 col-form-label" for="code">New Code <span class="text-red">*</span> :</label>
                            <div class="col-md-8 col-sm-8">
                                <input class="form-control" type="text" id="code" name="code" placeholder="New Code" data-parsley-required="true" data-parsley-required-message="UACS code is required" />
                            </div>
                        </div>
                        <div class="form-group row m-b-15">
                            <label class="col-md-4 col-sm-4 col-form-label" for="desc">Description <span class="text-red">*</span> :</label>
                            <div class="col-md-8 col-sm-8">
                                <input class="form-control" type="text" id="desc" name="desc" placeholder="Description" data-parsley-required="true" data-parsley-required-message="Description is required" />
                            </div>
                        </div>
                        <!-- <div class="form-group row m-b-15">
                            <label class="col-md-4 col-sm-4 col-form-label" for="desc">Amount <span class="text-red">*</span> :</label>
                            <div class="col-md-8 col-sm-8">
                                <input class="form-control" type="number" id="amt" name="amt" placeholder="Amount in peso" data-parsley-type="digits" data-parsley-required="true" />
                            </div>
                        </div> -->
                        <div class="form-group row m-b-0">
                            <label class="col-md-4 col-sm-4 col-form-label">&nbsp;</label>
                            <div class="col-md-8 col-sm-8">
                                <a href="javascript:;" class="btn btn-success" id="addBtn"><i class="fas fa-plus-circle m-r-5"></i>Add to List</a>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- end panel-body -->
            </div>
            <!-- end panel -->
            <div style="border: 1px; border-style: solid; border-radius: 5px;" class="text-grey-lighter p-b-15" align="center">
                <a href="#setup_fund" data-toggle="modal" class="btn btn-m bg-black-darker text-white m-t-15" id="fund" onclick="onShowModalFund();"><i class="fas fa-angle-double-right"></i> Setup Fund Type</a>
                <a href="#setup_income" data-toggle="modal" class="btn btn-m bg-black-darker m-t-15 text-white" id="income" onclick="onShowModalInc();"><i class="fas fa-angle-double-right"></i> Setup Income Type</a>
            </div>
        </div>
        <!-- end col-6 -->

        <!-- begin col-8 -->
        <div class="col-lg-8">
            <!-- begin card -->
            <div class="card text-center">
                <div class="card-header">
                    <ul class="nav nav-pills card-header-pills">
                        <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#card-pill-1">Active</a></li>
                        <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#card-pill-2">Inactive</a></li>
                    </ul>
                </div>
                <div class="card-block">
                    <div class="tab-content p-0 m-0">
                        <div class="tab-pane fade active show" id="card-pill-1">
                            <!-- begin panel -->
                            <div class="panel panel-white">
                                <!-- begin panel-heading -->
                                <div class="panel-heading">
                                    <div class="panel-heading-btn">
                                        <a href="javascript:;" class="btn btn-xs btn-warning m-b-10" data-click="panel-expand" id="expand"><i class="fa fa-expand m-r-5"></i><span id="exp">Expand</span></a>
                                        <a href="javascript:;" class="btn btn-xs btn-success m-b-10" data-click="panel-reload" id="reload-panel"><i class="fa fa-redo m-r-5"></i>Reload</a>
                                    </div>
                                    <h4 class="panel-title"></h4>
                                </div>
                                <!-- end panel-heading -->
                                <!-- begin panel-body -->
                                <div class="panel-body">                           
                                    <table id="data-table-combines" class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th class="text-nowrap" style="width: 5%;">Old Code</th>
                                                <th class="text-nowrap">New Code</th>
                                                <th class="text-nowrap">Description</th>
                                                <th class="text-nowrap">Fund Type</th>
                                                <th class="text-nowrap">Income Type</th>
                                                <th class="text-nowrap text-center">Options</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbod">
                                            {% for val in response %}
                                            {% if val.5 == 1 %}
                                            <tr>
                                                <td>{{val.1}}</td>
                                                <td>{{val.0}}</td>
                                                <td style="max-width: 100px;" title="{{val.4}}">{{val.4}}</td>
                                                <td>{{val.2}}</td>
                                                <td>{{val.3}}</td>
                                                <td align="center">
                                                    <a href="#view_modal" class="btn btn-xs btn-primary view" data-toggle="modal"><i class="fas fa-eye m-r-5"></i>View</a>
                                                    <a href="javascript:;" class="btn btn-xs btn-danger remove"><i class="fas fa-trash m-r-5"></i>Remove</a>
                                                </td>
                                            </tr>
                                            {% endif %}
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <!-- end panel-body -->
                            </div>
                            <!-- end panel -->
                        </div>
                        <div class="tab-pane fade" id="card-pill-2">
                            <!-- begin panel -->
                            <div class="panel panel-white">
                                <!-- begin panel-heading -->
                                <div class="panel-heading">
                                    <div class="panel-heading-btn">
                                        <a href="javascript:;" class="btn btn-xs btn-warning m-b-10" data-click="panel-expand" id="expand2"><i class="fa fa-expand m-r-5"></i><span id="exp2">Expand</span></a>
                                        <!-- <a href="javascript:;" class="btn btn-xs btn-success m-b-10" id="reload"><i class="fa fa-redo m-r-5"></i>Reload</a> -->
                                    </div>
                                    <h4 class="panel-title"></h4>
                                </div>
                                <!-- end panel-heading -->
                                <!-- begin panel-body -->
                                <div class="panel-body">                           
                                    <table id="data-table-combines2" class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th class="text-nowrap" style="width: 5%;">Old Code</th>
                                                <th class="text-nowrap">New Code</th>
                                                <th class="text-nowrap">Description</th>
                                                <th class="text-nowrap">Fund Type</th>
                                                <th class="text-nowrap">Income Type</th>
                                                <th class="text-nowrap text-center">Options</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbod2">
                                            {% for val in response %}
                                            {% if val.5 == 0 %}
                                            <tr>
                                                <td>{{val.1}}</td>
                                                <td>{{val.0}}</td>
                                                <td style="max-width: 100px;" class="text-ellipsis" title="{{val.4}}">{{val.4}}</td>
                                                <td>{{val.2}}</td>
                                                <td>{{val.3}}</td>
                                                <td align="center">

                                                </td>
                                            </tr>
                                            {% endif %}
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <!-- end panel-body -->
                            </div>
                            <!-- end panel -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- end card -->
        </div>
        <!-- end col-8 -->
    </div>
    <!-- end row -->
    <!-- begin row -->
        <!-- begin col-12 -->
        <div class="col-lg-12">
            <h3>Nature of Collection</h3>
            <div class="panel panel-inverse">
                <!-- begin panel-heading -->
                <div class="panel-heading">
                    <h4 class="panel-title">Setup Nature of Collection</h4>
                </div>
                <!-- end panel-heading -->
                <!-- begin panel-body -->
                <div class="panel-body">
                    <!-- begin row -->
                    <div class="row">
                        <div class="form-group m-b-15 col-lg-6">
                            <label class="form-label" for="inc-select">Income Type :</label>
                            <div class="">
                                <select class="form-control" data-dropup-auto="false" data-size="10" data-live-search="false" data-style="btn-white"  id="inc-select" data-parsley-excluded="true">
                                    <option value="Please choose" selected disabled>Please choose</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group m-b-15 col-lg-6">
                            <label class="form-label" for="uacs_select">UACS Code :</label>
                            <div class="">
                                <select class="form-control" data-dropup-auto="false" data-size="10" data-live-search="true" data-style="btn-white" id="uacs_select" data-parsley-excluded="true">
                                    <option value="Please choose" selected disabled>Please choose</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- end row -->
                    <table class="table table-bordered table-striped table-hover" id="nature-col-tbl">
                        <thead class="text-center">
                            <th class="text-nowrap">UACS Code</th>
                            <th class="text-nowrap">Description</th>
                            <th class="text-nowrap">Nature of Collection</th>
                            <th class="text-nowrap">Options</th>
                        </thead>
                        <tbody class="text-center">

                        </tbody>
                    </table>
                    <!-- begin col-12 -->
                    <div class="col-lg-12">
                        <a href="javascript:;" class="btn btn-sm btn-success pull-right" style="display: none;" id="plus-but"><i class="fas fa-plus-square fa-lg"></i></a>
                    </div>
                    <!-- end col-12 -->
                </div>
                <!-- end panel-body -->
            </div>
        </div>
        <!-- end col-12 -->
    <!-- end row -->
</div>
<!-- end #content -->
<!-- #modal-dialog 1-->
<div class="modal fade" id="setup_fund">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"></h4>
                <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <!-- begin card -->
                <div class="card card-inverse bg-gradient-silver">
                    <div class="card-block">
                        <h4 class="card-title m-t-5 m-b-20 text-black-lighter text-center">Setup Fund Type</h4>
                        <form class="form-horizontal" id="setup_fund_form">
                            <div class="form-group row m-b-15 addFundDiv">
                                <a href="javascript:;" class="btn btn-sm btn-inverse col-sm-5 m-l-10" id="manageFundBut"><i class="fas fa-angle-double-right"></i> Goto Manage Fund Type</a>
                            </div>
                            <div class="form-group row m-b-15 addFundDiv">
                                <label class="col-md-4 col-sm-4 col-form-label" for="codeFund">Fund Type Code <span class="text-red">*</span> :</label>
                                <div class="col-md-8 col-sm-8">
                                    <input class="form-control" type="text" id="codeFund" name="codeFund" placeholder="Code" data-parsley-required="true" data-parsley-required-message="Fund code is required" style="text-transform: uppercase;" />
                                </div>
                            </div>
                            <div class="form-group row m-b-15 addFundDiv">
                                <label class="col-md-4 col-sm-4 col-form-label" for="descFund">Description <span class="text-red">*</span> :</label>
                                <div class="col-md-8 col-sm-8">
                                    <input class="form-control" type="text" id="descFund" name="descFund" placeholder="Description" data-parsley-required="true" data-parsley-required-message="Fund description is required" style="text-transform: uppercase;"/>
                                </div>
                            </div>
                            <div class="form-group row m-b-15 manageFundDiv" style="display: none;">
                                <a href="javascript:;" class="btn btn-sm btn-inverse col-sm-4 m-l-10" id="addFundBut"><i class="fas fa-angle-double-right"></i> Goto Add Fund Type</a>
                            </div>
                            <!-- for loop -->
                            <div class=" manageFundDiv text-black-lighter" style="display: none;">
                                <table id="data-table-modal-fund" class="table"> 
                                    <thead align="center">
                                        <th class="text-nowrap bg-white">Fund Type</th>
                                        <th class="text-nowrap text-center bg-white">Options</th>
                                    </thead>
                                    <tbody align="center">

                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer form-group addFundDiv m-b-0">
                                <a href="javascript:;" class="btn btn-white" id="closeFundBtn" data-dismiss="modal">Close</a>
                                <a href="javascript:;" class="btn btn-success" id="addFundBtn">Add</a>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- end card -->
            </div>
        </div>
    </div>
</div>
<!-- #modal-dialog 2-->
<div class="modal fade" id="setup_income">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"></h4>
                <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
            <!-- begin card -->
            <div class="card card-inverse bg-gradient-silver">
                <div class="card-block">
                    <h4 class="card-title m-t-5 m-b-20 text-black-lighter text-center">Setup Income Type</h4>
                    <form class="form-horizontal" id="setup_inc_form">
                        <div class="form-group row m-b-15 addIncDiv">
                            <a href="javascript:;" class="btn btn-sm btn-inverse col-sm-5 m-l-10" id="manageIncBut"><i class="fas fa-angle-double-right"></i> Goto Manage Income Type</a>
                        </div>
                        <!-- <div class="form-group row m-b-15 addIncDiv">
                            <label class="col-md-4 col-sm-4 col-form-label" for="codeInc">Income Type Code <span class="text-red">*</span> :</label>
                            <div class="col-md-8 col-sm-8">
                                <input class="form-control" type="text" id="codeInc" name="codeInc" placeholder="Code" data-parsley-type="digits" data-parsley-required="true" />
                            </div>
                        </div> -->
                        <div class="form-group row m-b-15 addIncDiv">
                            <label class="col-md-4 col-sm-4 col-form-label" for="descInc">Income Description<span class="text-red">*</span>:</label>
                            <div class="col-md-8 col-sm-8">
                                <input class="form-control" type="text" id="descInc" name="descInc" placeholder="Income description" data-parsley-required="true" data-parsley-required-message="Income description is required" style="text-transform: uppercase;"/>
                            </div>
                        </div>
                        <div class="form-group row m-b-15 manageIncDiv" style="display: none;">
                            <a href="javascript:;" class="btn btn-sm btn-inverse col-sm-5 m-l-10" id="addIncBut"><i class="fas fa-angle-double-right"></i> Goto Add Income Type</a>
                        </div>
                        <!-- for loop -->
                        <div class=" manageIncDiv text-black-lighter" style="display: none;">
                            <table id="data-table-modal-income" class="table">
                                <thead align="center">
                                    <th class="text-nowrap bg-white">Income Type</th>
                                    <th class="text-nowrap text-center bg-white">Options</th>
                                </thead>
                                <tbody align="center">

                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer form-group addIncDiv m-b-0">
                            <a href="javascript:;" class="btn btn-white" id="closeIncBtn" data-dismiss="modal">Close</a>
                            <a href="javascript:;" class="btn btn-success" id="addIncBtn">Add</a>
                        </div>
                    </form>
                </div>
            </div>
            <!-- end card -->
            </div>
        </div>
    </div>
</div>
<!-- #modal-dialog 3-->
<div class="modal fade" id="view_modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="view_header"></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <!-- begin card -->
                <div class="card text-left">
                    <div class="card-block">
                        <!-- begin panel -->
                        <div class="panel panel-white" data-sortable-id="form-validation-1">
                            <!-- begin panel-heading -->
    
                            <!-- end panel-heading -->
                            <!-- begin panel-body -->
                            <div class="panel-body" style="margin-bottom: -40px;;">
                                <form class="form-horizontal" name="demo-form" action="#" id="viewForm" autocomplete="off">
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="old-code">Old Code <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <input class="form-control" type="text" id="old-code" name="old-code" placeholder="Old Code" data-parsley-required="true" data-parsley-required-message="Old Code is required" />
                                        </div>
                                    </div>
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="new-code">New Code <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <input class="form-control" type="text" id="new-code" name="new-code" placeholder="New Code" />
                                        </div>
                                    </div>
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="fnd-type">Fund Type <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <select class="form-control selectpicker3" id="fnd-type" data-style="btn-white" data-size="10" data-parsley-required="true" data-parsley-required-message="Fund Type is required">
                                            
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="inc-type">Income Type <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <select class="form-control selectpicker4" id="inc-type" data-style="btn-white" data-size="10" data-parsley-required="true" data-parsley-required-message="Income Type is required">
                                            
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="desc-name">Description <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <input class="form-control" type="text" id="desc-name" name="desc-name" placeholder="Description" data-parsley-required="true" data-parsley-required-message="Description is required"/>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- end panel-body -->
                        </div>
                        <!-- end panel -->
                    </div>
                </div>
                <!-- end card -->
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-white" id="view_close" data-dismiss="modal">Close</a>
                <a href="javascript:;" class="btn btn-primary" id="view_editBtn">Edit</a>
            </div>
        </div>
    </div>
</div>
<!-- #modal-dialog 4-->
<div class="modal fade" id="editFund">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="view_header">Edit Fund Type</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <!-- begin card -->
                <div class="card text-left">
                    <div class="card-block">
                        <!-- begin panel -->
                        <div class="panel panel-white" data-sortable-id="form-validation-1">
                            <!-- begin panel-heading -->
    
                            <!-- end panel-heading -->
                            <!-- begin panel-body -->
                            <div class="panel-body" style="margin-bottom: -40px;;">
                                <form class="form-horizontal" name="demo-form" action="#" id="editFundForm" autocomplete="off">
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="editFund-code">Fund Code <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <input class="form-control" type="text" id="editFund-code" name="editFund-code" placeholder="Fund Code" data-parsley-required="true" data-parsley-required-message="Fund Code is required" style="text-transform: uppercase;" />
                                        </div>
                                    </div>
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="editFund-desc">Fund Description <span class="text-red">*</span> :</label>
                                        <div class="col-md-8 col-sm-8">
                                            <input class="form-control" type="text" id="editFund-desc" name="editFund-desc" placeholder="Fund Description" data-parsley-required="true" data-parsley-required-message="Fund description is required" style="text-transform: uppercase;" />
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- end panel-body -->
                        </div>
                        <!-- end panel -->
                    </div>
                </div>
                <!-- end card -->
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-white" id="editFund_close" data-dismiss="modal">Close</a>
                <a href="javascript:;" class="btn btn-success" id="editFund_update">Update</a>
            </div>
        </div>
    </div>
</div>
<!-- #modal-dialog 4-->
<div class="modal fade" id="editInc">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="view_header">Edit Income Type</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <!-- begin card -->
                <div class="card text-left">
                    <div class="card-block">
                        <!-- begin panel -->
                        <div class="panel panel-white" data-sortable-id="form-validation-1">
                            <!-- begin panel-heading -->
    
                            <!-- end panel-heading -->
                            <!-- begin panel-body -->
                            <div class="panel-body" style="margin-bottom: -40px;;">
                                <form class="form-horizontal" name="demo-form" action="#" id="editIncForm" autocomplete="off">
                                    <div class="form-group row m-b-15">
                                        <label class="col-md-4 col-sm-4 col-form-label" for="editInc-desc">Income Description<span class="text-red">*</span>:</label>
                                        <div class="col-md-8 col-sm-8">
                                            <input class="form-control" type="text" id="editInc-desc" name="editInc-desc" placeholder="Income Description" data-parsley-required="true" data-parsley-required-message="Income description is required" style="text-transform: uppercase;"/>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- end panel-body -->
                        </div>
                        <!-- end panel -->
                    </div>
                </div>
                <!-- end card -->
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-white" id="editInc_close" data-dismiss="modal">Close</a>
                <a href="javascript:;" class="btn btn-success" id="editInc_update">Update</a>
            </div>
        </div>
    </div>
</div>
<!-- #add-nature -->
<div class="modal fade" id="add-nature">
    <div class="modal-dialog">
        <div class="modal-content">
            <form name="add-nature-form" id="add-nature-form" autocomplete="off">
                <div class="modal-header">
                    <h4 class="modal-title" id="nature-header"></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body">
                    <input type="text" class="form-control" placeholder="nature of collection" style="text-transform: uppercase;" id="desc-nature" data-parsley-required="true" data-parsley-required-message="Name is required."/>
                </div>
                <div class="modal-footer">
                    <a href="javascript:;" class="btn btn-white" data-dismiss="modal" id="closebut-nature"><i class="fas fa-times m-r-5"></i>Close</a>
                    <a href="javascript:;" class="btn btn-success" id="addbut-nature"><i class="fas fa-plus-circle m-r-5"></i>Add</a>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- #update-nature -->
<div class="modal fade" id="update-nature">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="update-header"></h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <input type="text" class="form-control" placeholder="nature of collection" style="text-transform: uppercase;" id="desc-nature-upd"/>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-white" data-dismiss="modal" id="closebut-nature-upd"><i class="fas fa-times m-r-5"></i>Close</a>
                <a href="javascript:;" class="btn btn-primary" id="updbut-nature"><i class="fas fa-check-circle m-r-5"></i>Update</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block page-js %}
<!--  -->
<script src="{%static 'assets/plugins/DataTables/media/js/jquery.dataTables.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/media/js/dataTables.bootstrap.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/dataTables.buttons.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/buttons.bootstrap.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/buttons.flash.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/jszip.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/pdfmake.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/vfs_fonts.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/buttons.html5.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Buttons/js/buttons.print.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/AutoFill/js/dataTables.autoFill.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/ColReorder/js/dataTables.colReorder.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/KeyTable/js/dataTables.keyTable.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/RowReorder/js/dataTables.rowReorder.min.js' %}"></script>
<script src="{%static 'assets/plugins/DataTables/extensions/Select/js/dataTables.select.min.js' %}"></script>
<script src="{%static 'assets/js/demo/table-manage-combine.demo.min.js' %}"></script>
<!--  -->
<script src="{%static 'assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js' %}"></script>
<script src="{%static 'assets/plugins/ionRangeSlider/js/ion-rangeSlider/ion.rangeSlider.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js' %}"></script>
<script src="{%static 'assets/plugins/masked-input/masked-input.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js' %}"></script>
<script src="{%static 'assets/plugins/password-indicator/js/password-indicator.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-combobox/js/bootstrap-combobox.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-select/bootstrap-select.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput-typeahead.js' %}"></script>
<script src="{%static 'assets/plugins/jquery-tag-it/js/tag-it.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-daterangepicker/moment.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
<script src="{%static 'assets/plugins/select2/dist/js/select2.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-eonasdan-datetimepicker/build/js/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-show-password/bootstrap-show-password.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap-colorpalette/js/bootstrap-colorpalette.js' %}"></script>
<script src="{%static 'assets/plugins/jquery-simplecolorpicker/jquery.simplecolorpicker.js' %}"></script>
<script src="{%static 'assets/plugins/clipboard/clipboard.min.js' %}"></script>
<script src="{%static 'assets/plugins/lightbox/js/lightbox.min.js' %}"></script>
<script src="{%static 'assets/js/demo/form-plugins.demo.js' %}"></script>
<!--  -->
{% endblock %}
{% block init %}
<script>
    $(document).ready(function() {
        App.init();
        TableManageCombine.init();
        FormPlugins.init();
        highlightSideNav();
        $('#inc-select').selectpicker('render');
        $('#uacs_select').selectpicker('render');
        getIncType();

        $.ajax({
            type: "POST",
            url: "{% url 'get_fund_type' %}",
            cache: false,
            dataType: 'json',
            data: {
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                $('.optdummy1').hide();
                $.each(obj, function(index, option){
                    $('.selectpicker1').append( new Option(option,option)); //value and text
                    $('.selectpicker3').append( new Option(option,option));
                });
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
        $.ajax({
            type: "POST",
            url: "{% url 'get_income_type' %}",
            cache: false,
            dataType: 'json',
            data: {
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                $('.optdummy2').hide();
                $.each(obj, function(index, option){
                    $('.selectpicker2').append( new Option(option,option)); //value and text
                    $('.selectpicker4').append( new Option(option,option)); 
                });
                $('.selectpicker2').append( new Option('N/A','N/A'));
                $('.selectpicker4').append( new Option('N/A','N/A'));
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });

        $('#inc-select').on('change', function() {
            getUacsCode($('#inc-select').val());
        });
        $('#inc-select').on('change', function() {
            if ($('#inc-select').val() == 'Please choose') {
                $('#inc-select').selectpicker().addClass('is-invalid');
            }
            else {
                $('#inc-select').selectpicker().removeClass('is-invalid');
            }
        });
        $('#uacs_select').on('change', function() {
            if ($('#uacs_select').val() == 'Please choose') {
                $('#uacs_select').addClass('is-invalid');
            }
            else {
                $('#uacs_select').removeClass('is-invalid');
                var uacs = $('#uacs_select').val().trim();
                var desc = $('#uacs_select').find('option:selected').text().split('-')[1];
                loadNatureCol(uacs,desc);
            }
        });

        function getIncType() {
            $.ajax({
                type: "POST",
                url: "{% url 'get_income_type' %}",
                // cache: true,
                dataType: 'json',
                data: {
                    csrfmiddlewaretoken:"{{csrf_token}}"
                },
                success: function(obj) {
                    $.each(obj, function(index, option){
                        $('#inc-select').append( new Option(option,option)); //value and text
                    });
                    $('#inc-select option').prop('style', 'font-size: 11px;')
                    $('#inc-select').selectpicker('refresh');
                },
                error: function(xhr, status, error) {
                    var errMsg = xhr.status + ': ' + xhr.statusText;
                    swal({
                        title: "Error!", 
                        text: errMsg,
                        type: "error",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    })
                }
            });
        };
        function getUacsCode(incomeType) {
            $.ajax({
                type: "POST",
                url: "{% url 'get_uacs_code' %}",
                cache: false,
                dataType: 'json',
                data: {
                    incomeType: incomeType,
                    csrfmiddlewaretoken:"{{csrf_token}}"
                },
                success: function(obj) {
                    $('#uacs_select').empty();
                    $('#uacs_select').append(new Option('Please choose')).select();
                    $('#uacs_select').find('option:selected').prop('disabled',true);                
                    $.each(obj, function(index, option){
                        $('#uacs_select').append( new Option(option[0]+' - '+option[1],option[0])); //text and value
                    });
                    $('#uacs_select option').prop('style', 'font-size: 11px;');
                    $('#uacs_select').selectpicker('refresh');
                },
                error: function(xhr, status, error) {
                    var errMsg = xhr.status + ': ' + xhr.statusText;
                    swal({
                        title: "Error!", 
                        text: errMsg,
                        type: "error",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    })
                }
            });
        };

        $('#expand').on('click', function(){
            if($('#expand').text()=='Expand') {
                $('#exp').text('Compress');
            }
            else {
                $('#exp').text('Expand');
            }
        });
        $('#expand2').on('click', function(){
            if($('#expand2').text()=='Expand') {
                $('#exp2').text('Compress');
            }
            else {
                $('#exp2').text('Expand');
            }
        });
        $('#reload-panel').on('click', function() {
            loadUACSdata();
        });
    });

    function loadNatureCol(uacs,desc) {
        $.ajax({
            type: "POST",
            url: "{% url 'load_nature_col' %}",
            // cache: true,
            dataType: 'json',
            data: {
                uacs: uacs,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                $('#nature-col-tbl tbody tr').remove();
                if (obj.length != 0) {
                    for (var i = 0;  i < obj.length; i++) {
                        $('#nature-col-tbl tbody').append(
                            `<tr>
                                <td class="text-nowrap">${uacs}</td>
                                <td class="text-nowrap">${desc}</td>
                                <td class="text-nowrap">${obj[i][0]}</td>
                                <td>
                                    <a href="javascript:;" class="btn btn-xs btn-primary" title="edit" id="edit-nature"><i class="fas fa-edit"></i></a>
                                    <a href="javascript:;" class="btn btn-xs btn-danger" title="remove" id="remove-nature"><i class="fas fa-trash"></i></a>
                                </td>
                            </tr>`
                        );
                    }
                    $('#plus-but').prop('style', 'display: block;');
                }
                else {
                    $('#nature-col-tbl tbody').append(
                        `<tr><td colspan="4" class="text-center">No results found</td></tr>`  
                    );
                    $('#plus-but').prop('style', 'display: block;');
                }
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
    };

    $('#nature-col-tbl tbody').on('click', '#remove-nature', function() {
        var name = $(this).closest('tr').find('td:eq(2)').html();
        var uacs = $('#uacs_select').val().trim();
        var desc = $('#uacs_select').find('option:selected').text().split('-')[1];
        swal({
            title: "Remove",
            text: "Are you sure to remove "+name+"?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#d9534f",
            confirmButtonText: "Yes",
            cancelButtonText: "No",
            closeOnConfirm: false,
            closeOnCancel: true,
            customClass: "Custom_Cancel"
        },
        function(isConfirm) {
            if (isConfirm){
                $.ajax({
                    type: "POST",
                    url: "{% url 'remove_nature' %}",
                    // cache: true,
                    dataType: 'json',
                    data: {
                        name: name,
                        csrfmiddlewaretoken:"{{csrf_token}}"
                    },
                    success: function(obj) {
                        swal({
                            title: "Removed Successfully", 
                            text: 'You have removed ' + name + ' to ' + uacs,
                            type: "success",
                            confirmButtonColor: "#428bca",
                            showLoaderOnConfirm: true
                        },
                        function(isConfirm){
                            if (isConfirm){
                                loadNatureCol(uacs,desc);
                            }
                        })
                    },
                    error: function(xhr, status, error) {
                        var errMsg = xhr.status + ': ' + xhr.statusText;
                        swal({
                            title: "Error!", 
                            text: errMsg,
                            type: "error",
                            confirmButtonColor: "#428bca",
                            showLoaderOnConfirm: true
                        })
                    }
                });
            }
        });
    });

    $('#nature-col-tbl tbody').on('click', '#edit-nature', function() {
        $('#update-header').text($(this).closest('tr').find('td:eq(1)').html());
        $('#desc-nature-upd').val($(this).closest('tr').find('td:eq(2)').html());
        $('#update-nature').modal('show');
        old_name = $('#desc-nature-upd').val();
    });

    var old_name = '';

    $('#updbut-nature').on('click', function() {
        var new_name = $('#desc-nature-upd').val().trim();
        var uacs = $('#uacs_select').val().trim();
        var desc = $('#uacs_select').find('option:selected').text().split('-')[1];
        $.ajax({
            type: "POST",
            url: "{% url 'update_nature' %}",
            // cache: true,
            dataType: 'json',
            data: {
                old_name: old_name,
                new_name: new_name,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                swal({
                    title: "Updated Successfully", 
                    text: 'You have updated ' + old_name.toUpperCase() +' to ' + new_name.toUpperCase() + '.',
                    type: "success",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                },
                function(isConfirm){
                    if (isConfirm){
                        $('#update-nature').modal('hide');
                        loadNatureCol(uacs,desc);
                    }
                })
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
    });

    var dt_fund = $('#data-table-modal-fund').DataTable({
        'paging'      : false,
        'lengthChange': false,
        'searching'   : false,
        'ordering'    : false,
        'info'        : false,
        'autoWidth'   : true,
        "aaSorting"   : [[0, "desc" ]],
        dom: 'lBfrtip',
        buttons: [

        ],
        columnDefs:[{targets:1, render:function(data){
            return `<a href="#editFund" class="btn btn-xs btn-primary editFundBtn" data-toggle="modal"><i class="fas fa-edit m-r-5"></i>Edit</a>
                   <a href="javascript:;" class="btn btn-xs btn-danger deleteFundBtn"><i class="fas fa-trash m-r-5"></i>Delete</a>`;
        }}]
    });
    var dt_inc = $('#data-table-modal-income').DataTable({
        'paging'      : false,
        'lengthChange': false,
        'searching'   : false,
        'ordering'    : false,
        'info'        : false,
        'autoWidth'   : true,
        "aaSorting"   : [[0, "desc" ]],
        dom: 'lBfrtip',
        buttons: [

        ],
        columnDefs:[{targets:1, render:function(data){
            return `<a href="#editInc" class="btn btn-xs btn-primary editIncBtn" data-toggle="modal"><i class="fas fa-edit m-r-5"></i>Edit</a>
                   <a href="javascript:;" class="btn btn-xs btn-danger deleteIncBtn"><i class="fas fa-trash m-r-5"></i>Delete</a>`;
        }}]
    });
    var dt_combines = $('#data-table-combines').DataTable({
        'paging'      : true,
        'lengthChange': true,
        'searching'   : true,
        'ordering'    : false,
        'info'        : true,
        'autoWidth'   : false,
        'aaSorting'   : [[1, "desc" ]],
        'autoPrint'   : false,
        "aoColumns" : [ 
            { sWidth: '10%' },
            { sWidth: '30%' },
            { sWidth: '40%' },
            { sWidth: '0%' },
            { sWidth: '0%' },
            { sWidth: '15%' }
        ],
        dom: 'lBfrtip',
        buttons: [
        {
            extend:    'print',
            text:      '<i class="fas fa-print text-orange-lighter f-s-16"></i>',
            titleAttr: 'Print',
            exportOptions: {
                columns: [0,1,2,3,4]
            }
        },
        {
            extend:    'excel',
            text:      '<i class="fas fa-file-excel text-green-lighter f-s-16"></i>',
            titleAttr: 'Excel',
            exportOptions: {
                columns: [0,1,2,3,4]
            }
        },
        {
            extend:    'pdf',
            text:      '<i class="fas fa-file-pdf text-red-lighter f-s-16"></i>',
            titleAttr: 'PDF',
            exportOptions: {
                columns: [0,1,2,3,4]
            }
        }
    ],
        "lengthMenu": [ [5, 25, 50, -1], [5, 25, 50, "All"] ],
        columnDefs:[
            {
                targets:5, render:function(data){
                    return `<a href="#view_modal" class="btn btn-xs btn-primary view" data-toggle="modal" title="View"><i class="fas fa-eye"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-danger remove" title="Remove"><i class="fas fa-trash"></i></a>`;
                }
            },
            {
                targets:2,
                className: 'col-3-4-w',              
            },
            {
                targets:[3,4],
                visible: false,
            }
        ],
    });
    $('#fund').on('click', function() {
        $('#setup_fund_form').parsley().reset();
    });
    $('#income').on('click', function() {
        $('#setup_inc_form').parsley().reset();
    });
    $('#manageFundBut').on('click', function() {
        $('.addFundDiv').hide();
        $('.manageFundDiv').show();
    });
    $('#addFundBut').on('click', function() {
        $('.manageFundDiv').hide();
        $('.addFundDiv').show();
    });
    $('#manageIncBut').on('click', function() {
        $('.addIncDiv').hide();
        $('.manageIncDiv').show();
    });
    $('#addIncBut').on('click', function() {
        $('.manageIncDiv').hide();
        $('.addIncDiv').show();
    });
    function onShowModalFund() {
        $('.manageFundDiv').hide();
        $('.addFundDiv').show();
    }
    function onShowModalInc() {
        $('.manageIncDiv').hide();
        $('.addIncDiv').show();
    }

    var dt_combines2 = $('#data-table-combines2').DataTable({
        'paging'      : true,
        'lengthChange': true,
        'searching'   : true,
        'ordering'    : false,
        'info'        : true,
        'autoWidth'   : false,
        'aaSorting'   : [[1, "desc" ]],
        'autoPrint'   : false,
        "aoColumns" : [ 
            { sWidth: '10%' },
            { sWidth: '30%' },
            { sWidth: '25%' },
            { sWidth: '0%' },
            { sWidth: '0%' },
            { sWidth: '25%' }
        ],
        dom: 'lBfrtip',
        buttons: [
        {
            extend:    'print',
            text:      '<i class="fas fa-print text-orange-lighter f-s-16"></i>',
            titleAttr: 'Print',
            exportOptions: {
                columns: [0,1,2,3,4]
            }
        },
        {
            extend:    'excel',
            text:      '<i class="fas fa-file-excel text-green-lighter f-s-16"></i>',
            titleAttr: 'Excel',
            exportOptions: {
                columns: [0,1,2,3,4]
            }
        },
        {
            extend:    'pdf',
            text:      '<i class="fas fa-file-pdf text-red-lighter f-s-16"></i>',
            titleAttr: 'PDF',
            exportOptions: {
                columns: [0,1,2,3,4]
            }
        }
    ],
        "lengthMenu": [ [5, 25, 50, -1], [5, 25, 50, "All"] ],
        columnDefs:[
            {
                targets:5, render:function(data){
                    return '<a href="javascript:;" class="btn btn-xs btn-warning redo"><i class="fas fa-redo m-r-5"></i>Restore</a>';
                }
            },
            {
                targets:2,
                className: 'col-3-4',              
            },
            {
                targets:[3,4],
                visible: false,
            }
        ]
    });

    $('#data-table-combines2 tbody').on('click', '.redo', function() {
        dt_combines2.columns([3,4]).visible(true);
        var desc = $(this).closest('tr').find('td:eq(2)').html();
        var rowIdx = dt_combines2.row($(this).closest('tr')).index();
        var row = dt_combines2.row(rowIdx);
        var rowNode = row.node();
        var new_status = 1;
        var code = $(this).closest("tr").find("td:eq(1)").html();

        swal({
            title: "Restore",
            text: "Are you sure to restore\n"+desc+"?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#d9534f",
            confirmButtonText: "Yes",
            cancelButtonText: "No",
            closeOnConfirm: false,
            closeOnCancel: true,
            customClass: "Custom_Cancel"
        },
        function(isConfirm) {
            if (isConfirm){
                row.remove().draw();
                dt_combines.row.add(rowNode).draw();

                $.ajax({
                    type: "POST",
                    url: "{% url 'change_status_uacs' %}",
                    cache: false,
                    data: {
                        new_status: new_status,
                        code: code,
                        csrfmiddlewaretoken:"{{csrf_token}}"
                    },
                    success: function(obj) {
                        dt_combines2.columns([3,4]).visible(false);
                        loadUACSdata();
                        swal({
                            title: "Restored Successfully", 
                            text: desc.toUpperCase() + "\nwas transferred to the Active tab!", 
                            type: "success",
                            showLoaderOnConfirm: true,
                            confirmButtonColor: "#5cb85c",
                        })
                    },
                    error: function(xhr, status, error) {
                        var errMsg = xhr.status + ': ' + xhr.statusText;
                        swal({
                            title: "Error!", 
                            text: errMsg,
                            type: "error",
                            confirmButtonColor: "#428bca",
                            showLoaderOnConfirm: true
                        })
                    }
                });
            }
            else {
                dt_combines2.columns([3,4]).visible(false);
            }
        });
    });

    $('#data-table-combines tbody').on( 'click', '.remove', function () {
        dt_combines.columns([3,4]).visible(true);
        var desc = $(this).closest('tr').find('td:eq(2)').html();
        var rowIdx = dt_combines.row($(this).closest('tr')).index();
        var row = dt_combines.row(rowIdx);
        var rowNode = row.node();
        var new_status = 0;
        var code = $(this).closest("tr").find("td:eq(1)").html();

        swal({
            title: "Remove",
            text: "Are you sure to remove\n"+desc+"?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#d9534f",
            confirmButtonText: "Yes",
            cancelButtonText: "No",
            closeOnConfirm: false,
            closeOnCancel: true,
            customClass: "Custom_Cancel"
        },
        function(isConfirm) {
            if (isConfirm){
                row.remove().draw();
                dt_combines2.row.add(rowNode).draw();

                $.ajax({
                    type: "POST",
                    url: "{% url 'change_status_uacs' %}",
                    cache: false,
                    // dataType: 'json',
                    data: {
                        new_status: new_status,
                        code: code,
                        csrfmiddlewaretoken:"{{csrf_token}}"
                    },
                    success: function(obj) {
                        dt_combines.columns([3,4]).visible(false);
                        swal({
                            title: "Removed Successfully", 
                            text: desc.toUpperCase() + "\nwas transferred to the Inactive tab!", 
                            type: "success",
                            showLoaderOnConfirm: true,
                            confirmButtonColor: "#5cb85c",
                        })
                    },
                    error: function(xhr, status, error) {
                        var errMsg = xhr.status + ': ' + xhr.statusText;
                        swal({
                            title: "Error!", 
                            text: errMsg,
                            type: "error",
                            confirmButtonColor: "#428bca",
                            showLoaderOnConfirm: true
                        })
                    }
                });
            }
            else {
                dt_combines.columns([3,4]).visible(false);
            }
        });
    });

    // function isViewModalClosed() {
    //     return $('#view_modal').is(':visible');
    // };
    $('#view_modal').on('hidden.bs.modal', function (e) {
        dt_combines.columns([3,4]).visible(false);
    })
    var comp_fnd_type = '';
    var comp_inc_type = '';
    var id = '';
    $('#data-table-combines tbody').on('click', '.view', function() {
        dt_combines.columns([3,4]).visible(true);
        $('#view_editBtn').removeClass('btn-success');
        $('#view_editBtn').addClass('btn-primary');
        $('#view_editBtn').text('Edit');
        var dummy_fnd_type = $(this).closest('tr').find('td:eq(3)').html();
        var dummy_inc_type = $(this).closest('tr').find('td:eq(4)').html();
        id = $(this).closest('tr').find('td:eq(1)').html();
        if (comp_fnd_type != '') {
            if (dummy_fnd_type == comp_fnd_type) {
                $('#fnd-type').val(dummy_fnd_type);
            }
            else {
                $('#fnd-type').val(comp_fnd_type);
            }
        }
        else {
            $('#fnd-type').val(dummy_fnd_type);
        }
        if (comp_inc_type != '') {
            if (dummy_inc_type == comp_inc_type) {
                $('#inc-type').val(dummy_inc_type);
            }
            else {
                $('#inc-type').val(comp_inc_type);
            }
        }
        else {
            $('#inc-type').val(dummy_inc_type);
        }
        $('#view_header').text($(this).closest('tr').find('td:eq(2)').html());
        $('#old-code').val($(this).closest('tr').find('td:eq(0)').html());
        $('#new-code').val($(this).closest('tr').find('td:eq(1)').html());
        $('#desc-name').val($(this).closest('tr').find('td:eq(2)').html());
        document.getElementById( "old-code" ).setAttribute('readonly',true);
        document.getElementById( "new-code" ).setAttribute('readonly',true);
        document.getElementById( "fnd-type" ).setAttribute('disabled',true);
        document.getElementById( "inc-type" ).setAttribute('disabled',true);
        document.getElementById( "desc-name" ).setAttribute('readonly',true);
    });
    $('#view_editBtn').on('click', function() {
        comp_fnd_type = '';
        comp_inc_type = '';
        var txt = $('#view_editBtn').text();
        var old_code = $('#old-code').val();
        var new_code = $('#new-code').val();
        var fnd_type = $('#fnd-type').find("option:selected").text();
        var inc_type = $('#inc-type').find("option:selected").text();
        var desc_name = $('#desc-name').val();
        $('#view_editBtn').removeClass('btn-primary');
        $('#view_editBtn').addClass('btn-success');
        if(txt == 'Edit') {
            document.getElementById( "old-code" ).removeAttribute('readonly');
            document.getElementById( "new-code" ).removeAttribute('readonly');
            document.getElementById( "fnd-type" ).removeAttribute('disabled');
            document.getElementById( "inc-type" ).removeAttribute('disabled');
            document.getElementById( "desc-name" ).removeAttribute('readonly');
            $('#view_editBtn').text('Update');
        }
        else if(txt == 'Update') {
            swal({
                title: "Update",
                text: "Are you sure to update\n"+desc_name+"?",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#d9534f",
                confirmButtonText: "Yes",
                cancelButtonText: "No",
                closeOnConfirm: false,
                closeOnCancel: true,
                customClass: "Custom_Cancel"
            },
            function(isConfirm) {
                if (isConfirm){
                    $.ajax({
                        type: "POST",
                        url: "{% url 'update_uacs' %}",
                        cache: false,
                        // dataType: 'json',
                        data: {
                            id: id,
                            old_code: old_code,
                            new_code: new_code,
                            fnd_type: fnd_type,
                            inc_type: inc_type,
                            desc_name: desc_name,
                            csrfmiddlewaretoken:"{{csrf_token}}"
                        },
                        success: function(obj) {
                            comp_fnd_type = fnd_type;
                            comp_inc_type = inc_type;
                            swal({
                                title: "Updated Successfully", 
                                text: desc_name + "\nwas updated successfully!", 
                                type: "success",
                                showLoaderOnConfirm: true,
                                confirmButtonColor: "#5cb85c",
                            })
                            loadUACSdata();
                            $('#view_close').click();
                        },
                        error: function(xhr, status, error) {
                            var errMsg = xhr.status + ': ' + xhr.statusText;
                            swal({
                                title: "Error!", 
                                text: errMsg,
                                type: "error",
                                confirmButtonColor: "#428bca",
                                showLoaderOnConfirm: true
                            })
                        }
                    });
                }
            });
        }
    });

    $('#addBtn').on('click', function() {
        event.preventDefault();

        var fndtype = $('#fndtype').find("option:selected").text();
        var inctype = $('#inctype').find("option:selected").text();
        var o_code = $('#o_code').val().trim() == '' ? 'N/A' : $('#o_code').val().trim();
        var code = $('#code').val().trim();
        var desc = $('#desc').val().trim().toUpperCase();
        var fnd_empty = 0;
        var inc_empty = 0;

        if (fndtype == 'Select Fund Type') {
            $('#fndtype').addClass('is-invalid');
            fnd_empty = 1;
        }
        else {
            $('#fndtype').removeClass('is-invalid');
            fnd_empty = 0;
        }
        if (inctype == 'Select Income Type') {
            $('#inctype').addClass('is-invalid');
            inc_empty = 1;
        }
        else {
            $('#inctype').removeClass('is-invalid');
            inc_empty = 0;
        }
        $('#add-uacs-form').parsley();
        if($('#add-uacs-form').parsley().validate() && fnd_empty == 0 && inc_empty == 0) {
            swal({
                title: "Add UACS Record",
                text: "Are you sure to add this new fee?",
                type: "info",
                showCancelButton: true,
                confirmButtonColor: "#428bca",
                confirmButtonText: "Yes",
                cancelButtonText: "No",
                closeOnConfirm: false,
                closeOnCancel: true,
                customClass: "Custom_Cancel"
                },
                function(isConfirm) {
                    if (isConfirm) {
                        $.ajax({
                            url: "{% url 'add_uacs_list' %}",
                            type: "POST",
                            data: { 
                                fndtype: fndtype,
                                inctype: inctype,
                                o_code: o_code,
                                code: code,
                                desc: desc,
                                csrfmiddlewaretoken:"{{csrf_token}}"
                            },
                            timeout: 5000,
                            success:function(data) {
                                loadUACSdata();
                                swal({
                                    title: "Added Successfully", 
                                    text: "A new UACS is added to the system.", 
                                    type: "success",
                                    showLoaderOnConfirm: true,
                                    confirmButtonColor: "#5cb85c",
                                },
                                function(isConfirm){
                                    if (isConfirm){
                                        $('#fndtype').val('Select Fund Type');
                                        $('#inctype').val('Select Income Type');
                                        $('#code').val('');
                                        $('#o_code').val('');
                                        $('#desc').val('');
                                    }
                                })
                            },
                            error:function(xhr, status, error) {
                                var errMsg = xhr.status + ': ' + xhr.statusText;
                                swal({
                                    title: "Error!", 
                                    text: errMsg,
                                    type: "error",
                                    confirmButtonColor: "#428bca",
                                    showLoaderOnConfirm: true
                                })
                            }
                        })
                    }
                });
        }
    });

    $('#fndtype').on('change', function() {
        if (fndtype == 'Select Fund Type') {
            $('#fndtype').addClass('is-invalid');
        }
        else {
            $('#fndtype').removeClass('is-invalid');
        }
    });

    $('#inctype').on('change', function() {
        if (inctype == 'Select Income Type') {
            $('#inctype').addClass('is-invalid');
        }
        else {
            $('#inctype').removeClass('is-invalid');
        }
    });

    $('#addFundBtn').on('click', function() {
        event.preventDefault();

        var fund_code = $('#codeFund').val();
        var fund_desc = $('#descFund').val().toUpperCase();

        $('#setup_fund_form').parsley();
        if ($('#setup_fund_form').parsley().validate()) {
            $.ajax({
                url: "{% url 'add_uacs_fund_type' %}",
                type: "POST",
                data: { 
                    fund_code: fund_code,
                    fund_desc: fund_desc,
                    csrfmiddlewaretoken:"{{csrf_token}}"
                },
                timeout: 5000,
                success:function(data) {
                    $('#codeFund').val('');
                    $('#descFund').val('');
                    var txt = '"'+fund_desc.toUpperCase()+'"' + ' has been added to the list of funds.'
                    swal({
                        title: "Added Successfully", 
                        text: txt,
                        type: "success",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    },
                    function(isConfirm){
                        if (isConfirm){
                            dt_fund.row.add( [
                                fund_desc,
                            ] ).draw();
                        }
                    })
                },
                error:function(xhr, status, error) {
                    var errMsg = xhr.status + ': ' + xhr.statusText;
                    swal({
                        title: "Error!", 
                        text: errMsg,
                        type: "error",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    })
                }
            })
        }
    });

    $('#fund').on('click', function() {
        loadFundData();
    });

    function loadFundData() {
        $.ajax({
            type: "POST",
            url: "{% url 'get_fund_type' %}",
            cache: false,
            dataType: 'json',
            data: {
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                dt_fund.clear();
                $.each(obj, function(index, data){
                    dt_fund.row.add( [
                        data,
                    ] ).draw();
                })
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
    };

    function loadIncData() {
        $.ajax({
            type: "POST",
            url: "{% url 'get_income_type' %}",
            cache: false,
            dataType: 'json',
            data: {
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                dt_inc.clear();
                $.each(obj, function(index, data){
                    dt_inc.row.add( [
                        data,
                    ] ).draw();
                })
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
    };

    function loadUACSdata() {
        $.ajax({
            type: "POST",
            url: "{% url 'reload_UACS_data_table' %}",
            cache: false,
            dataType: 'json',
            data: {
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                dt_combines.clear().draw();
                $.each(obj, function(index, data){
                    if (data[5] == 1) {
                        dt_combines.row.add([
                            data[1],
                            data[0],
                            data[4],
                            data[2],
                            data[3]
                        ]);
                    }
                })
                dt_combines.draw();
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
    };

    $('#income').on('click', function() {
        $.ajax({
            type: "POST",
            url: "{% url 'get_income_type' %}",
            cache: false,
            dataType: 'json',
            data: {
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success: function(obj) {
                dt_inc.clear();
                $.each(obj, function(index, data){
                    dt_inc.row.add( [
                        data,
                    ] ).draw();
                })
            },
            error: function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        });
    });

    $('#addIncBtn').on('click', function() {
        event.preventDefault();

        var inc_desc = $('#descInc').val().toUpperCase();

        $('#setup_inc_form').parsley();
        if ($('#setup_inc_form').parsley().validate()) {
            $.ajax({
                url: "{% url 'add_uacs_inc_type' %}",
                type: "POST",
                data: { 
                    inc_desc: inc_desc,
                    csrfmiddlewaretoken:"{{csrf_token}}"
                },
                timeout: 5000,
                success:function(data) {
                    $('#descInc').val('');
                    var txt = '"'+inc_desc.toUpperCase()+'"' + ' has been added to the list of incomes.'
                    swal({
                        title: "Added Successfully", 
                        text: txt,
                        type: "success",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    },
                    function(isConfirm){
                        if (isConfirm){
                            dt_inc.row.add( [
                                inc_desc,
                            ] ).draw();
                        }
                    })
                },
                error:function(xhr, status, error) {
                    var errMsg = xhr.status + ': ' + xhr.statusText;
                    swal({
                        title: "Error!", 
                        text: errMsg,
                        type: "error",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    })
                }
            })
        }
    });

    $('#data-table-modal-income tbody').on('click', '.deleteIncBtn', function() {
        event.preventDefault();
        var inctype = $(this).closest('tr').find('td:eq(0)').html();
        var rowIdx = dt_inc.row($(this).closest('tr')).index();
        var row = dt_inc.row(rowIdx);
        $.ajax({
            url: "{% url 'deact_uacs_inc_type' %}",
            type: "POST",
            data: { 
                inctype: inctype,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            timeout: 5000,
            success:function(data) {
                var txt = '"'+inctype.toUpperCase()+'"' + ' has been removed from the list.'
                swal({
                    title: "Deleted Successfully", 
                    text: txt,
                    type: "success",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                },
                function(isConfirm){
                    if (isConfirm){
                        row.remove().draw();
                    }
                })
            },
            error:function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        })
    });

    $('#data-table-modal-fund tbody').on('click', '.deleteFundBtn', function() {
        event.preventDefault();
        var fndtype = $(this).closest('tr').find('td:eq(0)').html();
        var rowIdx = dt_fund.row($(this).closest('tr')).index();
        var row = dt_fund.row(rowIdx);
        $.ajax({
            url: "{% url 'deact_uacs_fund_type' %}",
            type: "POST",
            data: { 
                fndtype: fndtype,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            timeout: 5000,
            success:function(data) {
                var txt = '"'+fndtype.toUpperCase()+'"' + ' has been removed from the list.';
                swal({
                    title: "Deleted Successfully", 
                    text: txt,
                    type: "success",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                },
                function(isConfirm){
                    if (isConfirm){
                        row.remove().draw();
                    }
                })
            },
            error:function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        })
    });

    var fndtype_orig = '';
    $('#data-table-modal-fund tbody').on('click', '.editFundBtn', function() {
        event.preventDefault();
        var fndtype = $(this).closest('tr').find('td:eq(0)').html();
        fndtype_orig = fndtype;
        $.ajax({
            url:"{% url 'get_specific_fund' %}",
            type: "POST",
            data: {
                fndtype: fndtype,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            timeout: 5000,
            success: function(data) {
                $('#editFund-code').val(data[0]);
                $('#editFund-desc').val(fndtype);
            },
            error:function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        })
    });

    var inctype_orig = '';
    $('#data-table-modal-income tbody').on('click', '.editIncBtn', function() {
        event.preventDefault();
        var inctype = $(this).closest('tr').find('td:eq(0)').html();
        inctype_orig = inctype;
        $.ajax({
            url:"{% url 'get_specific_income' %}",
            type: "POST",
            data: {
                inctype: inctype,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            timeout: 5000,
            success: function(data) {
                $('#editInc-desc').val(data[0]);
            },
            error:function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        })
    });

    $('#editFund_update').on('click', function() {
        event.preventDefault();
        $('#editFundForm').parsley();
        var fndtype_upd = $('#editFund-desc').val();
        var fndcode = $('#editFund-code').val();
        $.ajax({
            url: "{% url 'update_uacs_fund_type' %}",
            type: "POST",
            data: { 
                fndtype_orig: fndtype_orig,
                fndtype_upd: fndtype_upd,
                fndcode: fndcode,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            timeout: 5000,
            success:function(data) {
                loadFundData();
                var txt = '"'+fndtype_orig+'"' + ' was updated successfully.';
                swal({
                    title: "Updated Successfully", 
                    text: txt,
                    type: "success",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                },
                function(isConfirm){
                    if (isConfirm){
                        $('#editFund_close').click();
                    }
                })
            },
            error:function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        })
    });

    $('#editInc_update').on('click', function() {
        event.preventDefault();
        $('#editIncForm').parsley();
        var inctype_upd = $('#editInc-desc').val();
        $.ajax({
            url: "{% url 'update_uacs_inc_type' %}",
            type: "POST",
            data: { 
                inctype_orig: inctype_orig,
                inctype_upd: inctype_upd,
                csrfmiddlewaretoken:"{{csrf_token}}"
            },
            success:function(data) {
                loadIncData();
                var txt = '"'+inctype_orig+'"' + ' was updated successfully.';
                swal({
                    title: "Updated Successfully", 
                    text: txt,
                    type: "success",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                },
                function(isConfirm){
                    if (isConfirm){
                        $('#editInc_close').click();
                    }
                })
            },
            error:function(xhr, status, error) {
                var errMsg = xhr.status + ': ' + xhr.statusText;
                swal({
                    title: "Error!", 
                    text: errMsg,
                    type: "error",
                    confirmButtonColor: "#428bca",
                    showLoaderOnConfirm: true
                })
            }
        })
    });

    $('#o_check').on('click', function() {
        if ($(this).prop("checked")) {
            $('#o_code').val('N/A');
            document.getElementById( "o_code" ).setAttribute('disabled',true);
        }
        else {
            $('#o_code').val('');
            document.getElementById( "o_code" ).removeAttribute('disabled');
        }
    });

    $('#plus-but').on('click', function() {
        $('#nature-header').text($('#uacs_select').find('option:selected').text().split('-')[1]);
        $('#add-nature').modal('show');
    });

    $('#add-nature').on('hidden.bs.modal', function() {
        $('#desc-nature').val('');
        $('#add-nature-form').parsley().reset();
    });

    $('#addbut-nature').on('click', function() {
        $('#add-nature-form').parsley();
        if ($('#add-nature-form').parsley().validate()) {
            var uacs = $('#uacs_select').find('option:selected').text().split('-')[0];
            var nature = $('#desc-nature').val();
            $.ajax({
                url: "{% url 'add_new_nature' %}",
                type: "POST",
                data: { 
                    uacs: uacs,
                    nature: nature,
                    csrfmiddlewaretoken:"{{csrf_token}}"
                },
                success:function(obj) {
                    swal({
                        title: "Added Successfully", 
                        text: 'You have added ' + nature + ' to ' + uacs,
                        type: "success",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    },
                    function(isConfirm){
                        if (isConfirm){
                            $('#closebut-nature').click();
                            var uacs = $('#uacs_select').val().trim();
                            var desc = $('#uacs_select').find('option:selected').text().split('-')[1];
                            loadNatureCol(uacs,desc);
                        }
                    })
                },
                error:function(xhr, status, error) {
                    var errMsg = xhr.status + ': ' + xhr.statusText;
                    swal({
                        title: "Error!", 
                        text: errMsg,
                        type: "error",
                        confirmButtonColor: "#428bca",
                        showLoaderOnConfirm: true
                    })
                }
            })
        }
    });

    function highlightSideNav() {
        $('#li-dash').removeClass('text-white');
        $('#li-user-mngt').removeClass('text-white');
        $('#li-add').removeClass('text-white');
        $('#li-edit').removeClass('text-white');
        $('#li-conf').click();
        $('#li-conf').addClass('text-white');
        $('#li-orsetup').removeClass('text-white');
        $('#setup').addClass('text-white');
        $('#li-email').removeClass('text-white');
    };
</script>
{% endblock %}