{% extends "views/layouts/pages/loginmain.html" %}
{% block content %}
{% load static %}
<style>
    .login-content i { 
        position: absolute; 
    }   
    .form-group {
        width: 100%; 
        margin-bottom: 10px;
    }  
    .icon { 
        padding: 10px; 
        min-width: 40px; 
        margin-top: -38px;
    }     
    .form-control { 
        width: 100%; 
        padding-left: 30px; 
    } 
    .neg_icon {
        margin-top: -60px;
    }
</style>
<div id="page-container" class="fade">
    <!-- begin login -->
    <div class="login login-v2" data-pageload-addclass="animated fadeIn">
        <!-- begin brand -->
        <div class="login-header">
            <div class="brand">
                <span><img src="{%static 'assets/img/logo/PUPLogo.jpg' %}" class="rounded-corner" style="max-width: 30px; max-height: 30px; margin-right: 10px;"/></span> <b>CMS</b>
                <small>Polytechnic University of the Philippines QC</small>
            </div>
            <div class="icon">
                <br><br>
                <i class="fas fa-id-badge"></i>
            </div>
        </div>
        <!-- end brand -->
        <!-- begin login-content -->
        <div class="login-content">
            <div class="m-b-0"> 
                <!--form-->
                <form autocomplete="off" action="#" id="login_form">
                    <div class="form-group m-b-20">
                        <input type="text" class="form-control form-control-lg" placeholder="Username" id="uname" data-parsley-required="true" data-parsley-required-message="Username is required" />
                        <i class="fas fa-user icon unameicon"></i>
                    </div>
                    <div class="form-group m-b-20">
                        <input type="text" class="form-control form-control-lg" placeholder="Password" id="password" data-parsley-required="true" data-parsley-required-message="Password is required" />
                        <i class="fas fa-lock icon pwordicon"></i>
                        <i class="fas fa-eye icon pull-right" style="position: relative; display: none;" id="icon-right"></i>
                        <i class="fas fa-eye-slash icon pull-right" style="position: relative; display: none;" id="icon-right2"></i>
                    </div>
                    <div class="form-group m-b-35">
                        
                    </div>
                    <div class="login-buttons">
                        <button type="submit" class="btn btn-danger btn-block btn-lg" id="btn_login">Log In</button>
                    </div>
                    <div class="m-t-20">

                    </div>
                </form>
                <!--End Form-->
            </div>  
        </div>
        <!-- end login-content -->
    </div>
    <!-- end login -->
 
    <!-- begin theme-panel -->

    <!-- end theme-panel -->
</div>
{% include "views/layouts/includes/base_js.html" %}
<script>
    $(document).ready(function() {
        $('.form-control').val('');
    });
    $('#icon-right').on('click', function() {
        $('#icon-right').hide();
        $('#icon-right2').show();
    });
    $('#icon-right2').on('click', function() {
        $('#icon-right2').hide();
        $('#icon-right').show();
    });
    $("#btn_login").click( function() {
        event.preventDefault();
        $('#login_form').parsley();
        if ($('#login_form').parsley().validate()) {
            checklogin();
        }
        else {
            $('.icon').css('color', '#363636');
            $('.unameicon').addClass('neg_icon');
            $('.pwordicon').addClass('neg_icon');
        }
    });
    function checklogin() {

        // window.location = "dashboard";
    };
    $('#uname').on('keypress', function() {
        $('.unameicon').removeClass('neg_icon');   
    });
    $('#password').on('keypress', function() {
        $('#icon-right').show();
        $('.pwordicon').removeClass('neg_icon');   
    });
    $('#password').on('keydown', function(event) {
        $('.pwordicon').css('color', '#363636'); 
        $('#icon-right').css('color', '#363636');
        $('#icon-right2').css('color', '#363636');
        if ($('#password').parsley().validate()) {
            var pwordTxt = $('#password').val();
            if (event.keyCode == 8 || event.keyCode == 46) {
                if (pwordTxt.length <= 1) {
                    $('#icon-right').hide();
                    $('.pwordicon').addClass('neg_icon');  
                }
            }
        }
    });
    $('#uname').on('keydown', function(event) {
        $('.unameicon').css('color', '#363636'); 
        if ($('#uname').parsley().validate()) {
            var pwordTxt = $('#uname').val();
            if (event.keyCode == 8 || event.keyCode == 46) {
                if (pwordTxt.length <= 1) {
                    $('.unameicon').addClass('neg_icon'); 
                }
            }
        }
    });
    $('#uname').on('focus', function() {
        $('#icon-right').hide();
        $('#icon-right2').hide();
    });
</script>
{% endblock %}